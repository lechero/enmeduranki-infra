# ============================================================================
# kingkontext.nl Production Environment Configuration
# ============================================================================
# IMPORTANT: Copy this file to .env and fill in all values
# Generate secrets with: cd ${APP_CODE_PATH}/apps/cms && ./generate-secrets.sh
# ============================================================================

# ----------------------------------------------------------------------------
# Application Source Path
# ----------------------------------------------------------------------------
APP_CODE_PATH=/home/enki/curriculum-vitae

# ----------------------------------------------------------------------------
# PostgreSQL Database Configuration
# ----------------------------------------------------------------------------
POSTGRES_DB=strapi
POSTGRES_USER=strapi
POSTGRES_PASSWORD=CHANGE_ME_GENERATE_STRONG_PASSWORD

# ----------------------------------------------------------------------------
# Strapi CMS Secrets (Generate with generate-secrets.sh)
# ----------------------------------------------------------------------------
# Generate APP_KEYS: node -e "console.log([1,2,3,4].map(() => require('crypto').randomBytes(16).toString('base64')).join(','))"
APP_KEYS=key1,key2,key3,key4

# Generate these: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
API_TOKEN_SALT=CHANGE_ME_GENERATE_RANDOM
ADMIN_JWT_SECRET=CHANGE_ME_GENERATE_RANDOM
TRANSFER_TOKEN_SALT=CHANGE_ME_GENERATE_RANDOM
JWT_SECRET=CHANGE_ME_GENERATE_RANDOM
STRAPI_ADMIN_CLIENT_PREVIEW_SECRET=CHANGE_ME_GENERATE_RANDOM

# ----------------------------------------------------------------------------
# Strapi Public URLs
# ----------------------------------------------------------------------------
STRAPI_URL=https://cms.kingkontext.nl
STRAPI_ADMIN_CLIENT_URL=https://cv.kingkontext.nl
NEXT_PUBLIC_STRAPI_URL=https://cms.kingkontext.nl

# ----------------------------------------------------------------------------
# Next.js App Configuration
# ----------------------------------------------------------------------------
NEXT_PUBLIC_URL=https://cv.kingkontext.nl
STRAPI_API_TOKEN=CHANGE_ME_CREATE_IN_STRAPI_ADMIN

# BetterAuth Secret (Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))")
BETTER_AUTH_SECRET=CHANGE_ME_GENERATE_RANDOM

# Optional: n8n Webhook URL (if using n8n automation)
N8N_OFFER_WEBHOOK_URL=

# ----------------------------------------------------------------------------
# CV Generator Worker Configuration
# ----------------------------------------------------------------------------
CV_GEN_WORKER_ID=kingkontext-worker-01
LLM_PROVIDER=openai
OPENAI_API_KEY=CHANGE_ME_YOUR_OPENAI_API_KEY
OPENAI_MODEL=gpt-4-turbo-preview
POLLING_INTERVAL_MS=15000

# ----------------------------------------------------------------------------
# PDF Export Worker Configuration
# ----------------------------------------------------------------------------
PDF_EXPORT_IMAGE_TAG=latest
PDF_EXPORT_POLL_INTERVAL_MS=5000
PDF_EXPORT_ALLOW_PARALLEL=false
PDF_EXPORT_DEBUG=

# ----------------------------------------------------------------------------
# Offer Finder Worker Configuration
# ----------------------------------------------------------------------------
OFFER_FINDER_IMAGE_TAG=latest
OFFER_FINDER_MODE=daemon
OFFER_FINDER_POLL_INTERVAL_MS=300000
OFFER_FINDER_PROCESS_SEARCHES=true
OFFER_FINDER_SEARCH_POLL_INTERVAL_MS=30000
OFFER_FINDER_KEYWORDS=
OFFER_FINDER_LOCATIONS=
OFFER_FINDER_REMOTE_ONLY=false
OFFER_FINDER_SINK=strapi
OFFER_FINDER_OUTPUT_DIR=/tmp/offers
OFFER_FINDER_HTTP_TIMEOUT_MS=30000
OFFER_FINDER_HTTP_RETRY_LIMIT=3
OFFER_FINDER_HTTP_RETRY_DELAY_MS=1000
OFFER_FINDER_HTTP_THROTTLE_MS=1000
OFFER_FINDER_HTTP_USER_AGENT=OfferFinder/1.0
OFFER_FINDER_HEADFIRST_ENABLED=true
OFFER_FINDER_HEADFIRST_BASE_URL=https://headfirst.nl
OFFER_FINDER_HEADFIRST_MAX_PAGES=5
OFFER_FINDER_HEADFIRST_DELAY_MS=2000
OFFER_FINDER_HEADFIRST_INCLUDE_SIMILAR=false
OFFER_FINDER_HEADFIRST_MODE=public
OFFER_FINDER_LOG_LEVEL=info

# ----------------------------------------------------------------------------
# Possibilities Discovery Worker Configuration
# ----------------------------------------------------------------------------
POSSIBILITIES_DISCOVERY_IMAGE_TAG=latest
POSSIBILITIES_DISCOVERY_MODE=daemon
POSSIBILITIES_DISCOVERY_POLL_INTERVAL_MS=600000
POSSIBILITIES_DISCOVERY_PROVIDER=openai
POSSIBILITIES_DISCOVERY_OPENAI_MODEL=gpt-4o-mini
POSSIBILITIES_DISCOVERY_TEMPERATURE=0.7
POSSIBILITIES_DISCOVERY_MAX_TOKENS=1000
POSSIBILITIES_DISCOVERY_HTTP_TIMEOUT_MS=30000
POSSIBILITIES_DISCOVERY_LOG_LEVEL=info

# ----------------------------------------------------------------------------
# Optional: AWS S3 Configuration (for file uploads)
# ----------------------------------------------------------------------------
# If not set, files will be stored in local Docker volumes
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_BUCKET=
